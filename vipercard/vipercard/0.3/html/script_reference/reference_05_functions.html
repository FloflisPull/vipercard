<!doctype html>
<html lang="en">
	<head><!-- Styles by GithubMarkdown, MIT license, Sindre Sorhus -->
<meta name="description" content="ViperCard, an open source HyperCard, make interactive 1 bit art and games like Macintosh, ViperCard - Script Reference - functions">
<meta name="keywords" content="ViperCard, an open source HyperCard, make interactive 1 bit art and games like Macintosh, ViperCard - Script Reference - functions">

<!-- Twitter Cards -->
<meta name="twitter:title" content="Projects">
<meta name="twitter:site" content="@vipercarddotnet">
<meta name="twitter:creator" content="@vipercarddotnet">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.vipercard.net/resources/intro/desc.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="ViperCard">
<meta property="og:url" content="https://www.vipercard.net/">
<meta property="og:site_name" content="ViperCard">

<meta http-equiv="cleartype" content="on">
<meta name="HandheldFriendly" content="True">



		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">
		<title>ViperCard - Script Reference - functions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="./github-markdown.css">
<link rel="stylesheet" href="./smalltheme.css">
</head>
<body>

<div class="smalltheme-uppernavbox"><span class="linktilebuttonhspace"></span><a class="smalltheme-textwithinbox" href="/">vipercard</a><span class="smalltheme-textwithinbox"> &gt; </span><a class="smalltheme-textwithinbox" href="reference_01_overview.html">script reference</a><span class="linktilebuttonhspace"></span></div>
<article class="markdown-body">


<!---
this is a generated file, changes will be lost.
-->

<p><a href="./reference_01_overview.html">Overview</a> | <a href="./reference_02_commands.html">Commands</a> | <a href="./reference_03_syntax.html">Syntax</a> | <a href="./reference_04_properties.html">Properties</a> | Functions | <a href="./reference_06_events.html">Event Handlers</a> | <a href="./reference_07_compatibility.html">Compatibility</a></p>
<h2 id="abs-x-">abs(x)</h2>
<p>Absolute value.</p>
<p>Examples:</p>
<pre><code>

put abs(-0.5) into x
put abs(0.5) into x

</code></pre><h2 id="atan-x-">atan(x)</h2>
<p>Arctangent, in radians.</p>
<p>Examples:</p>
<pre><code>

put atan(0.5) into x


</code></pre><h2 id="average-">average()</h2>
<p>Simple mean of numbers.</p>
<p>Supports any number of arguments.</p>
<p>You can also provide a comma-delimited string.</p>
<p>Examples:</p>
<pre><code>

put average(1,2,3) into x
put average(&quot;1,2,3&quot;) into x -- returns 2

</code></pre><h2 id="chartonum-x-">charToNum(x)</h2>
<p>From ascii-like number to a character. Note that characters in a field are displayed in Mac OS Roman encoding.</p>
<p>Note that the newline character is always \n (10).</p>
<p>Examples:</p>
<pre><code>

put charToNum(97) into x



</code></pre><h2 id="clickh-">clickH()</h2>
<p>Get x coordinate of a recent mouse click. See <code>clickLoc</code> for more details.</p>
<p>Examples:</p>
<pre><code>

put clickh() into x


</code></pre><h2 id="clickloc-">clickLoc()</h2>
<p>Get the coordinates of a recent mouse click.</p>
<p>This isn&#39;t necessarily the most recent mouseClick, it is only updated</p>
<p>1) clicks before the script runs</p>
<p>2) when you check the <code>mouseClick</code></p>
<p>3) when you simulate a click with <code>click</code> or <code>drag</code></p>
<p>Examples:</p>
<pre><code>

wait until the mouseClic
answer &quot;you clicked at&quot; &amp;&amp; the clickLoc


</code></pre><h2 id="clickv-">clickV()</h2>
<p>Get y coordinate of a recent mouse click. See <code>clickLoc</code> for more details.</p>
<p>Examples:</p>
<pre><code>

put clickv() into x


</code></pre><h2 id="commandkey-">commandKey()</h2>
<p>Check if this modifier key is pressed.</p>
<p>Examples:</p>
<pre><code>

if the commandKey is down then
    answer &quot;cmd key is down&quot;
end if
-- same as
if the cmdKey is down then
    answer &quot;cmd key is down&quot;
end if


</code></pre><h2 id="contains">contains</h2>
<p>Can you find a string within a string?</p>
<p>Examples:</p>
<pre><code>

if &quot;abc&quot; contains &quot;b&quot; then
    answer &quot;yes&quot;
end if

</code></pre><h2 id="cos-x-">cos(x)</h2>
<p>Examples:</p>
<pre><code>

put cos(0.5 * pi) into x

</code></pre><h2 id="date-">date()</h2>
<p>Returns the current date.</p>
<p>Examples:</p>
<pre><code>

the date
date()
the abbrev date
the short date
the long date
the English date

</code></pre><h2 id="exp-x-">exp(x)</h2>
<p>e to the power of x.</p>
<p>Examples:</p>
<pre><code>

put exp(0.5) into x



</code></pre><h2 id="exp2-x-">exp2(x)</h2>
<p>2 to the power of x.</p>
<p>Examples:</p>
<pre><code>

put exp2(0.5) into x

</code></pre><h2 id="is-a">is a</h2>
<p>Check the type of an expression.</p>
<p>Examples:</p>
<pre><code>

if x is a number then
    answer &quot;a&quot;
end if
if x is a integer then
    answer &quot;b&quot;
end if
if x is a logical then
    answer &quot;c&quot;
end if
if x is a point then
    answer &quot;d&quot;
end if
if x is a rect then
    answer &quot;e&quot;
end if

</code></pre><h2 id="is-in">is in</h2>
<p>Can you find a string within a string?</p>
<p>Examples:</p>
<pre><code>

if &quot;b&quot; is in &quot;abc&quot; then
    answer &quot;yes&quot;
end if

-- is within is the same,
if &quot;b&quot; is within &quot;abc&quot; then
    answer &quot;yes&quot;
end if


</code></pre><h2 id="keychar-">keyChar()</h2>
<p>In an afterkeydown or afterkeyup handler, check the character. Is affected by shift.</p>
<p>Examples:</p>
<pre><code>

put keyChar() into x
on afterKeyDown
    if keyChar() is &quot;i&quot; and the shiftKey is up and \
            the optionKey is down and the commandKey is up then
        answer &quot;you pressed option-i&quot;
    else if keyChar() is &quot;U&quot; and the shiftKey is down and \
            the optionKey is up and the commandKey is up then
        answer &quot;you pressed shift-u&quot;
    end if
end afterKeyDown

</code></pre><h2 id="keyrepeated-">keyRepeated()</h2>
<p>In an afterkeydown handler, did this event come from the user holding the key down?</p>
<p>Examples:</p>
<pre><code>

if not keyRepeated() then
    add 1 to uniqueKeyPresses
end if

</code></pre><h2 id="length-s-">length(s)</h2>
<p>Returns the length of a string, in characters.</p>
<p>Examples:</p>
<pre><code>

answer length(&quot;abc&quot;) -- displays 3
answer the length of &quot;&quot; -- displays 0
answer the length of &quot;abc&quot; -- displays 3

</code></pre><h2 id="ln-x-">ln(x)</h2>
<p>Examples:</p>
<pre><code>

put ln(0.5) into x





</code></pre><h2 id="log2-x-">log2(x)</h2>
<p>Base-2 logarithm.</p>
<p>Examples:</p>
<pre><code>

put log2(0.5) into x

</code></pre><h2 id="max-">max(...)</h2>
<p>Supports any number of arguments. You can also provide a comma-delimited string.</p>
<p>Examples:</p>
<pre><code>

put max(1,2,3) into x
put max(&quot;45,49,40&quot;) into x -- returns 49

</code></pre><h2 id="me">me</h2>
<p>Refers to the object that owns the current script.</p>
<p>Similar to, but distinct from &#39;target&#39;.</p>
<p>Examples:</p>
<pre><code>

put the id of me into theTarget

set the width of me to 100

</code></pre><h2 id="min-">min()</h2>
<p>Supports any number of arguments. You can also provide a comma-delimited string.</p>
<p>Examples:</p>
<pre><code>

put min(1,2,3) into x
put min(&quot;45,49,40&quot;) into x -- returns 40

</code></pre><h2 id="mouse-">mouse()</h2>
<p>Is the mouse button currently down. Returns one of the constants <code>down</code> or <code>up</code>.</p>
<p>Examples:</p>
<pre><code>

if the mouse is down then
    answer &quot;mouse button is clicked&quot;
end if

</code></pre><h2 id="mouseclick-">mouseClick()</h2>
<p>Was the mouse recently clicked? Doesn&#39;t include the click that created the message, it needs to be later.</p>
<p>When you check the mouseClick, it will only return true once before resetting back to false. See also: clickloc, clickh, clickv.</p>
<p>Examples:</p>
<pre><code>

wait until the mouseClick
answer the clickloc


</code></pre><h2 id="mouseh-">mouseH()</h2>
<p>The x coordinate of the current mouse location.</p>
<p>Examples:</p>
<pre><code>

put mouseH() into x


</code></pre><h2 id="mouseloc-">mouseLoc()</h2>
<p>The coordinates of the current mouse location.</p>
<p>Examples:</p>
<pre><code>

put mouseLoc() into x


</code></pre><h2 id="mousev-">mouseV()</h2>
<p>The y coordinate of the current mouse location.</p>
<p>Examples:</p>
<pre><code>

put mouseV() into x


</code></pre><h2 id="number">number</h2>
<p><strong>Count parts of text</strong></p>
<pre><code>answer the number of chars in &quot;abc&quot;
answer the number of items in &quot;a,b,c&quot;
answer the number of lines in myList</code></pre><p><strong>Count current objects</strong></p>
<pre><code>answer the number of cards in this stack
answer the number of buttons in this card
answer the number of fields in this card
repeat with x = 1 to the number of cards in this stack
    set the name of card x of this stack to &quot;c&quot; &amp; x
end repeat</code></pre><p><strong>Get the number of an object.</strong></p>
<pre><code>answer the number of this card
put the number of cd fld id 1234 into x
put &quot;abc&quot; into cd fld x</code></pre><h2 id="numbertostr-x-">numberToStr(x)</h2>
<p>Convert number to string.</p>
<p>Examples:</p>
<pre><code>

put numberToStr(0.5) into x

</code></pre><h2 id="numtochar-x-">numToChar(x)</h2>
<p>From a character to an ascii-like number. Note that characters in a field are displayed in Mac OS Roman encoding.</p>
<p>Note that the newline character is always \n (10).</p>
<p>Examples:</p>
<pre><code>

put numToChar(&quot;a&quot;) into x


</code></pre><h2 id="objectbyid-id-">objectById(id)</h2>
<p>Gets the full id from the numeric id.</p>
<p>Examples:</p>
<pre><code>

-- assuming there is a cd btn id 1234
put objectById(1234) into x
-- x is now &quot;card button id 1234&quot;.
-- you can now do this
set the topleft of x to 100, 200

</code></pre><h2 id="offset-needle-haystack-">offset(needle, haystack)</h2>
<p>Search for a string within a string, and return the position where found. If not found, returns 0. (one-based indexing).</p>
<p>Examples:</p>
<pre><code>

put offset(&quot;b&quot;, &quot;abc&quot;) into x
-- x is now 2.


</code></pre><h2 id="optionkey-">optionKey()</h2>
<p>Check if this modifier key is pressed.</p>
<p>Examples:</p>
<pre><code>

if the optionKey is down then
    answer &quot;opt key is down&quot;
end if

</code></pre><h2 id="param-n-">param(n)</h2>
<p>Get the nth value passed into the current procedure. Can be used to build a function that takes any number of arguments,  see example.</p>
<p>Examples:</p>
<pre><code>

on mySumOfNumbers
    put 0 into total
    repeat with x = 1 to paramCount()
        put total + param(x) into total
    end repeat
    answer &quot;total is&quot; &amp;&amp; total
end mySumOfNumbers

on mouseUp
    mySumOfNumbers 1, 2, 3
end mouseUp

</code></pre><h2 id="paramcount-">paramCount()</h2>
<p>Get the number of values passed into the current procedure. Can be used to build a function that takes any number of arguments, see example.</p>
<p>Examples:</p>
<pre><code>

on mySumOfNumbers
    put 0 into total
    repeat with x = 1 to paramCount()
        put total + param(x) into total
    end repeat
    answer &quot;total is&quot; &amp;&amp; total
end mySumOfNumbers

on mouseUp
    mySumOfNumbers 1, 2, 3
end mouseUp

</code></pre><h2 id="params-">params()</h2>
<p>Get all of the values passed into the current procedure.</p>
<p>Examples:</p>
<pre><code>

put params() into x


</code></pre><h2 id="random-n-">random(n)</h2>
<p>n must be an integer.</p>
<p>Returns random value between 1 and n.</p>
<p>Examples:</p>
<pre><code>

put random(20) into roll

</code></pre><h2 id="result-">result()</h2>
<p>The return value of the last called function or procedure.</p>
<p>Examples:</p>
<pre><code>

on myProc
    return &quot;a&quot;
end myProc
on mouseUp
    myProc
    answer the result
end mouseUp

</code></pre><h2 id="round-x-">round(x)</h2>
<p>Returns integer nearest to number. Odd integers plus 0.5 round up, even integers plus 0.5 round down.</p>
<p>Examples:</p>
<pre><code>

put round(1.7) into x

</code></pre><h2 id="screenrect-">screenRect()</h2>
<p>Examples:</p>
<pre><code>

put screenRect() into x


</code></pre><h2 id="seconds-">seconds()</h2>
<p>Seconds since January 1, 1904.</p>
<p>Examples:</p>
<pre><code>

put seconds() into x

</code></pre><h2 id="selectedchunk-">selectedChunk()</h2>
<p>Current selection, looks something like &#39;char 2 to 4 of cd fld id 1234&#39;.</p>
<p>Examples:</p>
<pre><code>

put selectedChunk() into x


</code></pre><h2 id="selectedfield-">selectedField()</h2>
<p>The field that contains current selected text, looks something like &#39;cd fld id 1234&#39;.</p>
<p>Examples:</p>
<pre><code>

put selectedField() into x


</code></pre><h2 id="selectedline-">selectedLine()</h2>
<p>The number of the line of the current selected text.</p>
<p>Examples:</p>
<pre><code>

put selectedLine() into x


</code></pre><h2 id="selectedtext-">selectedText()</h2>
<p>The value of the current selected text.</p>
<p>Examples:</p>
<pre><code>

put selectedText() into x

</code></pre><h2 id="shiftkey-">shiftKey()</h2>
<p>Check if this modifier key is pressed.</p>
<p>Examples:</p>
<pre><code>

if the shiftKey is down then
    answer &quot;shift key is down&quot;
end if


</code></pre><h2 id="sqrt-x-">sqrt(x)</h2>
<p>Examples:</p>
<pre><code>

put sqrt(0.5) into x

</code></pre><h2 id="sin-x-">sin(x)</h2>
<p>Examples:</p>
<pre><code>

put sin(0.5 * pi) into x


</code></pre><h2 id="strtonumber-x-">strToNumber(x)</h2>
<p>Parse string to number. Supports scientific notation. If cannot be parsed, returns &quot;false&quot;</p>
<p>Examples:</p>
<pre><code>

put strToNumber(&quot;12&quot;) into x
put strToNumber(&quot;-12&quot;) into x
put strToNumber(&quot;1e6&quot;) into x
ask &quot;what is a number&quot;
put it into x
if strToNumber(x) is false then
    answer &quot;that was not a number&quot;
end if



</code></pre><h2 id="sum-">sum()</h2>
<p>Supports any number of arguments.</p>
<p>You can also provide a comma-delimited string.</p>
<p>Examples:</p>
<pre><code>

put sum(1,2,3) into x
put sum(&quot;1,2,3&quot;) into x -- returns 6


</code></pre><h2 id="tan-x-">tan(x)</h2>
<p>Examples:</p>
<pre><code>

put tan(0.125 * pi) into x


</code></pre><h2 id="target">target</h2>
<p>Refers to the object that was most recently acted on.</p>
<p>Here&#39;s one way this can be useful: If you have many buttons that all basically perform the same action, you could have an &#39;on mouseup&#39; handler in the card script instead of a separate script within each button. This script in the card could check the target to see which of the buttons were clicked.</p>
<p>Different than &#39;me&#39;, which is the owner of the currently running script, which might be different than the button that was clicked.</p>
<p>Examples:</p>
<pre><code>

set the width of the target to 100

put the short id of the target into x


</code></pre><h2 id="there-is-a">there is a</h2>
<p>Check for the existence of an object.</p>
<p>Examples:</p>
<pre><code>

if there is a cd btn id 12345 then
    answer &quot;found&quot;
end if
if there is not a cd btn id 12345 then
    answer &quot;not found&quot;
end if

</code></pre><h2 id="ticks-">ticks()</h2>
<p>Ticks (60th of a second) since January 1, 1904.</p>
<p>Examples:</p>
<pre><code>

put ticks() into x

</code></pre><h2 id="tool-">tool()</h2>
<p>The current simulated tool, as set by the <code>choose</code> command. (The <code>choose</code> command can be used to draw lines and shapes).</p>
<p>The actual current tool will be the browse tool when any script is running.</p>
<p>Examples:</p>
<pre><code>

choose pencil tool
answer tool() -- shows &quot;pencil&quot;

</code></pre><h2 id="tolowercase-">toLowerCase()</h2>
<p>Examples:</p>
<pre><code>

answer toLowerCase(&quot;ABC&quot;) -- shows &quot;abc&quot;

</code></pre><h2 id="touppercase-">toUpperCase()</h2>
<p>Examples:</p>
<pre><code>

answer toUpperCase(&quot;abc&quot;) -- shows &quot;ABC&quot;


</code></pre><h2 id="trunc-x-">trunc(x)</h2>
<p>Get integer part of a number. i.e. for positive numbers, always round down to the nearest integer.</p>
<p>Examples:</p>
<pre><code>

put trunc(0.5) into x



</code></pre><h2 id="annuity-rate-periods-">annuity(rate, periods)</h2>
<p>Computes the total cost of an annuity now that will pay you one unit per period, over the specific number of periods.</p>
<p>You want to purchase an annuity that pays you $10,000 a year for 10 years. The interest rate is 10%. How much will it cost you now? The amount loaned is 10000 * annuity(0.10, 10), or 61445.67.</p>
<h2 id="compound-rate-periods-">compound(rate, periods)</h2>
<p>Returns the value of one unit of principal invested at the interest rate and compounded over the specified number of periods.</p>
<p>Example: $100 invested for 20 years at 10% interest compounded yearly:</p>
<p>futureValue = 100 * compound(0.10, 20) = about $673</p>
</article>
</body>
</html>
